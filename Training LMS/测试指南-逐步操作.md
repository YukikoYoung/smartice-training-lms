# SmartIce LMS 系统测试指南 - 逐步操作

**测试日期**: 2025-11-15
**测试目的**: 验证系统核心功能完整性
**预计时长**: 30-60分钟

---

## 测试前准备

### 步骤1: 启动后端服务

```bash
# 1. 打开终端1
cd "/Users/apple/Desktop/知识库/餐饮运营知识库/SmartIce Operation System/培训工具/Training LMS/backend"

# 2. 激活虚拟环境并启动
./venv/bin/python3 main.py
```

**预期输出**:
```
正在创建数据库表...
数据库表创建完成！
INFO:     Uvicorn running on http://0.0.0.0:8000
```

✅ **确认**: 看到 "Uvicorn running" 表示后端已启动

---

### 步骤2: 启动前端服务

```bash
# 1. 打开终端2 (新终端窗口)
cd "/Users/apple/Desktop/知识库/餐饮运营知识库/SmartIce Operation System/培训工具/Training LMS/frontend"

# 2. 启动开发服务器
npm run dev
```

**预期输出**:
```
VITE v7.2.2  ready in xxx ms

➜  Local:   http://localhost:5173/
➜  Network: http://192.168.x.x:5173/
```

✅ **确认**: 看到 "Local: http://localhost:5173/" 表示前端已启动

---

### 步骤3: 打开浏览器

1. 打开Chrome浏览器
2. 访问: `http://localhost:5173`
3. 按F12打开开发者工具 (Console标签)

✅ **确认**: 看到登录页面

---

## 测试场景1: 用户登录 (基础功能)

### 测试1.1: 普通员工登录

**测试账号**:
- 用户名: `waiter001`
- 密码: `123456`
- 角色: L1 服务员

**操作步骤**:
1. 在登录页面输入用户名: `waiter001`
2. 输入密码: `123456`
3. 点击"登录"按钮

**预期结果**:
- ✅ 登录成功,跳转到课程列表页面 (`/courses`)
- ✅ 右上角显示用户名: "小王"
- ✅ 左侧菜单显示: 我的课程、学习记录、我的考试等
- ✅ 控制台无错误信息

**截图位置**: `测试截图/1.1-员工登录.png`

---

### 测试1.2: 管理员登录

**先退出当前账号**:
1. 点击右上角用户名 → 点击"退出登录"
2. 返回登录页面

**测试账号**:
- 用户名: `admin`
- 密码: `admin123`
- 角色: L5+ 运营负责人

**操作步骤**:
1. 输入用户名: `admin`
2. 输入密码: `admin123`
3. 点击"登录"

**预期结果**:
- ✅ 登录成功,跳转到课程列表
- ✅ 右上角显示: "张总"
- ✅ 左侧菜单**额外显示**: "管理后台"入口
- ✅ 控制台无错误

**截图位置**: `测试截图/1.2-管理员登录.png`

---

## 测试场景2: 课程浏览与学习 (核心流程)

**保持admin登录状态,或切换回waiter001**

### 测试2.1: 查看课程列表

**操作步骤**:
1. 点击左侧菜单 "我的课程"
2. 或访问: `http://localhost:5173/courses`

**预期结果**:
- ✅ 显示2门课程:
  - "前厅运营标准与服务流程"
  - "厨房运营标准与岗位流程"
- ✅ 每门课程显示:
  - 课程标题
  - 课程描述
  - 章节数量
  - "查看详情"按钮

**检查点**:
```
课程1: 前厅运营标准与服务流程
- 章节数: 3个
- 部门: 前厅

课程2: 厨房运营标准与岗位流程
- 章节数: 3个
- 部门: 厨房
```

**截图位置**: `测试截图/2.1-课程列表.png`

---

### 测试2.2: 查看课程详情

**操作步骤**:
1. 点击"前厅运营标准与服务流程"的"查看详情"按钮
2. 进入课程详情页

**预期结果**:
- ✅ 显示课程标题和描述
- ✅ 显示3个章节:
  1. 通用管理标准 (4个内容)
  2. 管理岗位工作流程 (3个内容)
  3. 服务岗位工作流程 (4个内容)
- ✅ 每个章节显示"开始学习"按钮
- ✅ 显示课程进度条(如果之前学过)

**检查点**:
- 章节顺序正确 (order: 1, 2, 3)
- 内容数量匹配

**截图位置**: `测试截图/2.2-课程详情.png`

---

### 测试2.3: 开始学习章节

**操作步骤**:
1. 点击第1章"通用管理标准"的"开始学习"
2. 进入学习页面 (`/courses/1/chapters/1/study`)

**预期结果**:
- ✅ 显示章节标题: "通用管理标准"
- ✅ 显示学习内容列表:
  1. 通用服务礼仪 - 客人问候标准、服务态度标准
  2. 仪容仪表标准 - 男士/女士仪容仪表规范、着装标准
  3. 毛巾使用标准 - 分色使用、清洗消毒、定位摆放
  4. 托盘使用标准 - 装盘原则、行走步伐、安全注意事项
- ✅ 显示内容类型图标 (📄文档 / 🎥视频)
- ✅ 显示学习时长 (如: 15分钟)
- ✅ 显示"完成章节"按钮

**注意**: 由于实际内容文件未上传,可能显示"内容加载失败"或占位符,这是正常的

**截图位置**: `测试截图/2.3-学习页面.png`

---

### 测试2.4: 完成章节学习

**操作步骤**:
1. 在学习页面滚动查看所有内容
2. 点击"完成章节"按钮

**预期结果**:
- ✅ 显示"章节已完成"提示
- ✅ 返回课程详情页
- ✅ 第1章显示"✅已完成"标记
- ✅ 课程进度条更新 (33%: 1/3章节)

**API调用检查** (开发者工具 Network标签):
```
POST /api/learning/chapters/1/complete
状态: 200 OK
响应: { "message": "章节完成", ... }
```

**截图位置**: `测试截图/2.4-完成章节.png`

---

## 测试场景3: 考试流程 (核心功能)

### 测试3.1: 查看可用考试

**操作步骤**:
1. 点击左侧菜单 "我的考试"
2. 或访问: `http://localhost:5173/dashboard` → 查看"可参加的考试"

**预期结果**:
- ✅ 显示考试列表(如果已创建)
- ⚠️ 如果显示"暂无可用考试",这是正常的(需要管理员创建考试)

**如果没有考试,跳到步骤3.5先创建考试**

**截图位置**: `测试截图/3.1-考试列表.png`

---

### 测试3.2: 开始考试

**前提**: 已有可用考试

**操作步骤**:
1. 点击某个考试的"开始考试"按钮
2. 确认考试规则 (如有弹窗)
3. 进入考试页面

**预期结果**:
- ✅ 显示考试标题
- ✅ 显示考试时长倒计时 (如: 60分钟)
- ✅ 显示题目列表 (从589道题库中抽取)
- ✅ 题目类型多样:
  - 单选题 (A/B/C/D选项)
  - 多选题 (可多选)
  - 判断题 (对/错)
- ✅ 显示已答题数 / 总题数
- ✅ 显示"提交试卷"按钮

**检查点**:
- 题目内容清晰
- 选项显示正常
- 可以正常选择答案

**截图位置**: `测试截图/3.2-考试页面.png`

---

### 测试3.3: 提交考试

**操作步骤**:
1. 回答部分题目 (至少5道)
2. 点击"提交试卷"
3. 确认提交

**预期结果**:
- ✅ 显示成绩页面:
  - 总分
  - 正确题数 / 总题数
  - 是否及格 (>=70分)
  - 用时
- ✅ 显示答题详情:
  - 每道题的正误
  - 正确答案
  - 解析
- ✅ 如果不及格,显示"补考"按钮和补考时间

**API调用检查**:
```
POST /api/exams/submit
请求体: { exam_id, answers: {...} }
响应: { score, passed, correct_count, ... }
```

**截图位置**: `测试截图/3.3-考试成绩.png`

---

### 测试3.4: 查看学习统计

**操作步骤**:
1. 点击左侧菜单 "学习记录"
2. 或访问: `http://localhost:5173/dashboard`

**预期结果**:
- ✅ 显示学习统计卡片:
  - 已学课程数
  - 学习时长
  - 完成章节数
  - 考试次数
- ✅ 显示学习进度列表:
  - 正在学习的课程
  - 进度百分比
- ✅ 显示考试记录:
  - 考试名称
  - 成绩
  - 时间

**截图位置**: `测试截图/3.4-学习统计.png`

---

## 测试场景4: 管理后台 (管理员功能)

**⚠️ 必须使用admin账号登录**

### 测试4.1: 访问管理后台

**操作步骤**:
1. 确保已用admin/admin123登录
2. 点击左侧菜单 "管理后台"
3. 或访问: `http://localhost:5173/admin/dashboard`

**预期结果**:
- ✅ 进入管理后台仪表板
- ✅ 显示统计数据:
  - 总用户数: 5
  - 总课程数: 2
  - 总考试数: (实际数量)
  - 总题目数: 589
- ✅ 显示图表或数据列表

**权限验证**:
- 如果用waiter001登录访问 `/admin/dashboard`
- ✅ 应被拒绝,重定向到首页,提示"权限不足"

**截图位置**: `测试截图/4.1-管理后台仪表板.png`

---

### 测试4.2: 用户管理

**操作步骤**:
1. 点击管理后台左侧菜单 "用户管理"
2. 或访问: `http://localhost:5173/admin/users`

**预期结果**:
- ✅ 显示用户列表,共5个用户:
  1. admin (张总) - L5+ - headquarters
  2. regional_mgr (李经理) - L5 - headquarters
  3. store_mgr (王店长) - L4 - front_hall
  4. chef (赵厨师长) - L4 - kitchen
  5. waiter001 (小王) - L1 - front_hall
- ✅ 显示筛选功能:
  - 按职级筛选
  - 按部门筛选
  - 搜索用户
- ✅ 每个用户显示:
  - 姓名、用户名、职级、部门、岗位、门店
  - 操作按钮(编辑/删除)

**测试操作**:
1. 搜索"小王" → 应只显示waiter001
2. 筛选"L4" → 应显示store_mgr和chef
3. 筛选"前厅" → 应显示store_mgr和waiter001

**截图位置**: `测试截图/4.2-用户管理.png`

---

### 测试4.3: 课程管理

**操作步骤**:
1. 点击"课程管理"
2. 或访问: `http://localhost:5173/admin/courses`

**预期结果**:
- ✅ 显示2门课程列表
- ✅ 每门课程显示:
  - 课程名称、编码(FH-OPS-001/KC-OPS-001)
  - 章节数
  - 发布状态: "已发布"
  - 部门类型
  - 操作按钮(编辑/删除)
- ✅ 有"新增课程"按钮

**测试操作**:
1. 点击"编辑"按钮
2. 查看课程编辑表单
3. 取消(不实际修改)

**截图位置**: `测试截图/4.3-课程管理.png`

---

### 测试4.4: 题目管理

**操作步骤**:
1. 点击"题目管理"
2. 或访问: `http://localhost:5173/admin/questions`

**预期结果**:
- ✅ 显示题目列表
- ✅ 显示题目总数: 589道
- ✅ 筛选功能:
  - 按课程筛选
  - 按题型筛选(单选/多选/判断)
  - 按难度筛选(简单/中等/困难)
  - 搜索题目内容
- ✅ 每道题显示:
  - 题目内容(前50字)
  - 题型
  - 所属课程
  - 难度
  - 操作按钮

**测试操作**:
1. 筛选"单选题" → 应显示335道
2. 筛选"前厅课程" → 应显示相关题目
3. 搜索"服务礼仪" → 应显示相关题目

**截图位置**: `测试截图/4.4-题目管理.png`

---

### 测试4.5: 创建考试

**操作步骤**:
1. 点击"考试管理"
2. 或访问: `http://localhost:5173/admin/exams`
3. 点击"创建考试"按钮

**填写表单**:
- 考试名称: "前厅基础知识测试"
- 所属课程: 选择"前厅运营标准与服务流程"
- 考试时长: 60分钟
- 及格分数: 70分
- 题目数量: 20道
- 题型分配:
  - 单选题: 12道
  - 多选题: 6道
  - 判断题: 2道

**预期结果**:
- ✅ 表单验证正常
- ✅ 提交成功
- ✅ 返回考试列表,新考试已创建
- ✅ 显示考试详情:
  - 考试名称
  - 题目数: 20道
  - 参考人数: 0

**API调用检查**:
```
POST /api/exams/
请求体: { title, course_id, duration, pass_score, ... }
响应: { id, title, ... }
```

**截图位置**: `测试截图/4.5-创建考试.png`

---

## 测试场景5: 辅助功能 (Mock数据测试)

**⚠️ 注意**: 这些功能当前使用localStorage,数据不持久

### 测试5.1: 通知功能

**操作步骤**:
1. 点击右上角"通知"图标 (铃铛)
2. 或访问: `http://localhost:5173/notifications`

**预期结果**:
- ✅ 显示通知列表(Mock数据):
  - 系统通知
  - 考试提醒
  - 培训通知
  - 成就通知
- ✅ 显示未读/已读状态
- ✅ 可以:
  - 查看通知详情
  - 标记已读
  - 全部标记已读
  - 按类型筛选

**截图位置**: `测试截图/5.1-通知列表.png`

---

### 测试5.2: 学习笔记

**操作步骤**:
1. 访问: `http://localhost:5173/notes`

**预期结果**:
- ✅ 显示笔记列表(Mock数据)
- ✅ 可以:
  - 创建笔记(标题+内容)
  - 编辑笔记
  - 删除笔记
  - 搜索笔记
- ✅ 笔记关联到课程和章节

**测试操作**:
1. 点击"新建笔记"
2. 填写标题: "服务礼仪重点"
3. 填写内容: "1. 面带微笑 2. 主动问候"
4. 选择课程
5. 保存 → 应显示在列表中

**⚠️ 刷新页面数据会丢失(localStorage)**

**截图位置**: `测试截图/5.2-学习笔记.png`

---

### 测试5.3: 错题本

**操作步骤**:
1. 访问: `http://localhost:5173/wrong-questions`

**预期结果**:
- ✅ 显示错题列表(Mock数据)
- ✅ 每道错题显示:
  - 题目内容
  - 我的答案(错误)
  - 正确答案
  - 解析
  - 错误次数
- ✅ 可以:
  - 按课程筛选
  - 查看/隐藏已掌握题目
  - 标记为"已掌握"
  - 查看题目详情

**截图位置**: `测试截图/5.3-错题本.png`

---

### 测试5.4: 证书查看

**操作步骤**:
1. 访问: `http://localhost:5173/certificates`

**预期结果**:
- ✅ 显示证书列表(Mock数据)
- ✅ 每个证书显示:
  - 证书名称
  - 课程名称
  - 获得时间
  - 成绩
  - 证书编号
- ✅ 可以:
  - 查看证书详情
  - 下载证书(如有功能)

**截图位置**: `测试截图/5.4-证书列表.png`

---

### 测试5.5: 排行榜

**操作步骤**:
1. 访问: `http://localhost:5173/leaderboard`

**预期结果**:
- ✅ 显示学习排行榜(Mock数据)
- ✅ 排行维度:
  - 本周/本月/全部
  - 按平均分排序
- ✅ 每个用户显示:
  - 排名
  - 姓名
  - 职级
  - 考试次数
  - 平均分
  - 证书数
- ✅ 高亮当前用户

**截图位置**: `测试截图/5.5-排行榜.png`

---

### 测试5.6: 全局搜索

**操作步骤**:
1. 点击右上角搜索图标
2. 或访问: `http://localhost:5173/search`
3. 输入关键词: "服务"
4. 点击搜索

**预期结果**:
- ✅ 显示搜索结果,分类显示:
  - 课程结果
  - 笔记结果
  - 题目结果
- ✅ 搜索词高亮
- ✅ 可以点击结果跳转

**截图位置**: `测试截图/5.6-全局搜索.png`

---

### 测试5.7: 个人资料

**操作步骤**:
1. 点击右上角用户名 → "个人资料"
2. 或访问: `http://localhost:5173/profile`

**预期结果**:
- ✅ 显示个人信息:
  - 用户名(不可编辑)
  - 真实姓名
  - 手机号
  - 职级(不可编辑)
  - 部门(不可编辑)
  - 岗位
  - 门店
- ✅ 可以编辑:
  - 真实姓名
  - 手机号
- ✅ 点击"保存"更新成功

**⚠️ 当前使用localStorage,刷新后恢复原值**

**截图位置**: `测试截图/5.7-个人资料.png`

---

## 测试检查清单

### 核心功能 ✅

- [ ] 登录功能正常
  - [ ] 普通员工可登录
  - [ ] 管理员可登录
  - [ ] 登录失败提示正确
  - [ ] 退出登录正常

- [ ] 课程浏览正常
  - [ ] 课程列表显示2门课程
  - [ ] 课程详情显示章节
  - [ ] 章节顺序正确

- [ ] 学习流程正常
  - [ ] 可以开始学习章节
  - [ ] 学习页面显示内容
  - [ ] 完成章节后进度更新

- [ ] 考试流程正常
  - [ ] 可以开始考试
  - [ ] 题目正常显示(从589道抽取)
  - [ ] 可以选择答案
  - [ ] 提交后显示成绩
  - [ ] 成绩计算正确

- [ ] 学习统计正常
  - [ ] Dashboard显示统计数据
  - [ ] 学习进度正确
  - [ ] 考试记录正确

### 管理后台 ✅

- [ ] 权限控制正常
  - [ ] 普通员工无法访问管理后台
  - [ ] L4+用户可以访问
  - [ ] 权限提示正确

- [ ] 用户管理功能
  - [ ] 显示5个用户
  - [ ] 筛选功能正常
  - [ ] 搜索功能正常
  - [ ] 编辑功能正常(可选测试)

- [ ] 课程管理功能
  - [ ] 显示2门课程
  - [ ] 发布状态正确
  - [ ] 编辑功能正常(可选测试)

- [ ] 题目管理功能
  - [ ] 显示589道题目
  - [ ] 筛选功能正常
  - [ ] 搜索功能正常

- [ ] 考试管理功能
  - [ ] 可以创建考试
  - [ ] 考试列表正常
  - [ ] 考试详情正常

### 辅助功能 ⚠️ (Mock数据)

- [ ] 通知功能
  - [ ] 通知列表显示
  - [ ] 标记已读功能
  - [ ] 筛选功能

- [ ] 学习笔记
  - [ ] 创建笔记
  - [ ] 编辑笔记
  - [ ] 删除笔记
  - [ ] 搜索笔记

- [ ] 错题本
  - [ ] 错题列表显示
  - [ ] 标记已掌握
  - [ ] 筛选功能

- [ ] 证书查看
  - [ ] 证书列表显示
  - [ ] 证书详情

- [ ] 排行榜
  - [ ] 排行榜显示
  - [ ] 时间筛选
  - [ ] 当前用户高亮

- [ ] 全局搜索
  - [ ] 搜索功能
  - [ ] 结果分类显示

- [ ] 个人资料
  - [ ] 个人信息显示
  - [ ] 编辑功能

---

## 已知问题记录

### 问题1: 内容文件未上传
- **描述**: 学习页面的具体内容文件(Markdown/视频)未上传
- **影响**: 学习内容显示为占位符或加载失败
- **状态**: 预期行为,不影响流程测试
- **解决**: 后续上传23个内容文件

### 问题2: 辅助功能使用localStorage
- **描述**: 通知、笔记、错题等功能使用localStorage存储
- **影响**: 刷新页面数据丢失
- **状态**: 已知,待对接后端API
- **解决**: 1-2天内对接/api/features/* API

### 问题3: (测试中发现的问题记录在此)
- **描述**:
- **重现步骤**:
- **预期行为**:
- **实际行为**:
- **优先级**: 高/中/低

---

## 测试结果总结

**测试日期**: ________
**测试人员**: ________
**测试耗时**: ________

### 通过情况

- 核心功能: __ / __ 项通过
- 管理后台: __ / __ 项通过
- 辅助功能: __ / __ 项通过
- **总通过率**: __%

### 发现问题

**严重问题** (阻碍使用):
1.

**一般问题** (影响体验):
1.

**建议优化**:
1.

### 测试结论

- [ ] ✅ 核心功能完整,可以上线测试
- [ ] ⚠️ 核心功能基本完整,需修复部分问题
- [ ] ❌ 核心功能有严重问题,需要修复后再测试

**签字**: ________  **日期**: ________

---

## 下一步行动

### 立即修复 (如有严重问题)
1.

### 短期优化 (1-2天)
1. 对接7个辅助功能的后端API
2. 修复测试中发现的一般问题
3. 上传学习内容文件

### 中期计划 (1周)
1. 性能优化
2. 添加更多考试
3. 完善用户引导

---

**测试指南版本**: v1.0
**最后更新**: 2025-11-15
